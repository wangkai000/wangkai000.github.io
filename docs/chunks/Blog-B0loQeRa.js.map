{"version":3,"file":"Blog-B0loQeRa.js","sources":["../../src/components/blog/TextList.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { Post } from \"~/config/types\";\nimport { currentBlogTag } from \"~/logics/index\";\n\nconst router = useRouter();\n\nconst allRoutes = router.getRoutes();\n\nconst {\n    weeklyRoutes,\n    otherRoutes,\n}: { weeklyRoutes: Post[]; otherRoutes: Post[] } = getPostList(allRoutes);\n\n/**\n * 将所有的汇成一个，通过 tag 切换\n */\nconst allPosts = computed(() => [\n    ...filterAndSortByTags([...otherRoutes, ...weeklyRoutes]),\n]) as ComputedRef<{ name: string; list: Post[] }[]>;\n\n/**\n * 当前选择的 tag 和数据列表\n */\nfunction handleClick(item: (typeof allPosts.value)[0]) {\n    currentBlogTag.value = item.name;\n}\n\n/**\n * 1. 从地址栏找，没有的话，默认全部\n * 2. 切换的时候，需要更新地址栏\n */\nconst hash = window.location.hash;\ncurrentBlogTag.value = hash\n    ? decodeURIComponent(hash)\n    : currentBlogTag.value || \"#全部\";\n\nwatchEffect(() => {\n    if (currentBlogTag.value) window.location.hash = currentBlogTag.value;\n});\n\nconst currentTagAndList = computed(\n    () =>\n        allPosts.value.find((i) => i.name === currentBlogTag.value) ||\n        allPosts.value[0],\n);\n\nfunction getPostList(posts: any[]) {\n    if (posts.length) {\n        const parseRoute = (post: any) => {\n            const fileName = post.path.split(\"/\").pop();\n            const index = fileName.split(\"-\")[0];\n            const title = `第${index}期 - ${fileName.split(\"-\")[1]}`;\n            const path = post.path;\n            const { desc, date, tags, cover } = post.meta.frontmatter;\n\n            return {\n                index,\n                title,\n                path,\n                desc: desc as string,\n                date: date as string,\n                tags: tags as string[],\n                cover: cover as string,\n            };\n        };\n\n        const weeklyRoutes = posts\n            .filter((i: any) => i.path.startsWith(\"/blog/weekly\"))\n            .filter(\n                (i) => !i.path.endsWith(\".html\") && i?.meta?.frontmatter?.date,\n            )\n            .map((i) => parseRoute(i));\n\n        const otherRoutes = posts\n            .filter((i: any) => i.path.startsWith(\"/blog/post\"))\n            .filter(\n                (i) => !i.path.endsWith(\".html\") && i?.meta?.frontmatter?.date,\n            )\n            .map((i) => parseRoute(i));\n\n        return { weeklyRoutes, otherRoutes };\n    } else {\n        return { weeklyRoutes: [], otherRoutes: [] };\n    }\n}\n\nfunction filterAndSortByTags(list: any[]) {\n    const tagObjects: {\n        [key: string]: any[];\n    } = {};\n    list.forEach((post) => {\n        post.tags.forEach((tag: string) => {\n            if (tagObjects[tag]) tagObjects[tag].push(post);\n            else tagObjects[tag] = [post];\n\n            tagObjects[tag].sort((a, b) => a.index - b.index);\n        });\n    });\n\n    return Object.keys(tagObjects).map((key) => ({\n        name: key,\n        list: tagObjects[key].reverse(),\n    }));\n}\n\nconst isShowList = ref(true);\nfunction handleChangeShowMode() {\n    isShowList.value = !isShowList.value;\n}\n</script>\n\n<template>\n    <!-- 标签 -->\n    <header\n        class=\"relative mx-auto max-w-xl flex flex-col space-y-2\"\n        style=\"font-family: LXGW WenKai Screen R\"\n    >\n        <div\n            class=\"relative w-fit cursor-pointer select-none text-3xl font-bold\"\n            @click=\"handleChangeShowMode\"\n        >\n            <div\n                class=\"reverse-card\"\n                :style=\"{\n                    transform: isShowList ? 'rotateY(0deg)' : 'rotateY(180deg)',\n                }\"\n            >\n                Blog\n            </div>\n            <div\n                class=\"reverse-card absolute left-0 top-0\"\n                :style=\"{\n                    transform: !isShowList\n                        ? 'rotateY(0deg)'\n                        : 'rotateY(180deg)',\n                }\"\n            >\n                Blog\n            </div>\n            <div class=\"absolute left-18 top-4\">\n                <svg\n                    height=\"24\"\n                    width=\"24\"\n                    viewBox=\"0 0 32 32\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                    <defs>\n                        <filter\n                            id=\"shadow\"\n                            y=\"-40%\"\n                            x=\"-40%\"\n                            width=\"180px\"\n                            height=\"180%\"\n                            color-interpolation-filters=\"sRGB\"\n                        >\n                            <feDropShadow\n                                dx=\"1\"\n                                dy=\"1\"\n                                stdDeviation=\"1.2\"\n                                flood-opacity=\".5\"\n                            />\n                        </filter>\n                    </defs>\n                    <g\n                        fill=\"none\"\n                        transform=\"rotate(0 16 16)\"\n                        filter=\"url(%23shadow)\"\n                    >\n                        <path\n                            d=\"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z\"\n                            fill=\"white\"\n                        />\n                        <path\n                            d=\"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z\"\n                            fill=\"white\"\n                        />\n                        <path\n                            d=\"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z\"\n                            fill=\"black\"\n                        />\n                        <path\n                            d=\"m13 10.814v11.188l2.969-2.866.428-.139h4.768z\"\n                            fill=\"black\"\n                        />\n                    </g>\n                </svg>\n            </div>\n        </div>\n\n        <div>\n            <ul class=\"flex flex-wrap list-none justify-start -m-1\">\n                <li v-for=\"item in allPosts\" :key=\"item.name\">\n                    <div\n                        style=\"border: 1px solid #e4e4e7\"\n                        :class=\"\n                            currentTagAndList.name === item.name\n                                ? '!border-neutral-300 !bg-black !text-white !dark:border-[#52525B] !dark:bg-white !dark:text-black '\n                                : ''\n                        \"\n                        class=\"dark:!border-[#3e3e3e] m-1 inline-flex cursor-pointer appearance-none rounded-[6px] bg-white px-2 py-1 text-center text-xs/tight text-neutral-500 font-bold no-underline transition-colors hover:border-neutral-300 dark:bg-[rgb(24,24,27)] hover:bg-neutral-100 focus:outline-none focus-visible:ring focus:ring-0 focus-visible:ring-neutral-300 dark:hover:border-[#52525B] dark:hover:bg-[#27272A] dark:hover:text-[#E4E4E5]\"\n                        @click=\"handleClick(item)\"\n                    >\n                        {{ item.name }}\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <p class=\"text-sm text-[#7C7C82] font-semibold\">\n            {{ currentTagAndList?.list?.length }} posts\n        </p>\n        <br />\n    </header>\n\n    <div class=\"relative\" style=\"font-family: LXGW WenKai Screen R\">\n        <!-- 列表数据 -->\n        <ol\n            v-show=\"isShowList\"\n            class=\"mx-auto mt-6 max-w-xl flex flex-col space-y-6\"\n        >\n            <li v-for=\"article in currentTagAndList?.list\" :key=\"article.index\">\n                <component\n                    :is=\"article.path.includes('://') ? 'a' : 'RouterLink'\"\n                    v-bind=\"\n                        article.path.includes('://')\n                            ? {\n                                  href: article.path,\n                                  target: '_blank',\n                                  rel: 'noopener noreferrer',\n                              }\n                            : {\n                                  to: article.path,\n                              }\n                    \"\n                    class=\"relative flex flex-col gap-1\"\n                >\n                    <h1\n                        class=\"static inline-flex cursor-pointer appearance-none items-center border-0 rounded-[6px] bg-transparent p-0 text-xl font-bold underline decoration-1 underline-offset-2 before:absolute before:left-0 before:top-0 before:block before:h-full before:w-full before:cursor-pointer hover:decoration-dotted focus:outline-none focus-visible:ring focus:ring-0 focus-visible:ring-neutral-300\"\n                    >\n                        {{ article.title }}\n                    </h1>\n\n                    <div\n                        class=\"flex flex-col gap-1.5 text-[#818188] dark:text-[#CECED1]\"\n                    >\n                        <p class=\"text-[14px]\">\n                            {{ article.desc }}\n                        </p>\n                        <div\n                            class=\"[--pm-gap-inner:0.25em] [--pm-gap-x:1em] [--pm-gap-y:0.5em] [--pm-icon-size:1.25em] text-sm\"\n                        >\n                            <dl\n                                class=\"flex flex-wrap list-none justify-start text-[#A1A1A7] -mx-[calc(var(--pm-gap-x)/2)] -my-[calc(var(--pm-gap-y)/2)] dark:text-[#97979F]\"\n                            >\n                                <div\n                                    class=\"flex items-center gap-[--pm-gap-inner]\"\n                                >\n                                    <dt class=\"inline-flex items-center\">\n                                        <span class=\"sr-only\">Date</span>\n                                        <svg\n                                            fill=\"none\"\n                                            viewBox=\"0 0 24 24\"\n                                            class=\"h-[--pm-icon-size] w-[--pm-icon-size]\"\n                                            astro-icon=\"clock\"\n                                        >\n                                            <circle\n                                                cx=\"12\"\n                                                cy=\"12\"\n                                                r=\"7.25\"\n                                                stroke=\"currentColor\"\n                                                stroke-width=\"1.5\"\n                                            />\n                                            <path\n                                                stroke=\"currentColor\"\n                                                stroke-width=\"1.5\"\n                                                d=\"M12 8v4l2 2\"\n                                            />\n                                        </svg>\n                                    </dt>\n                                    <dd>\n                                        <time :datatime=\"article.date\">\n                                            {{ article.date }}\n                                        </time>\n                                    </dd>\n                                </div>\n                            </dl>\n                        </div>\n                    </div>\n                </component>\n            </li>\n        </ol>\n\n        <!-- 卡片数据 -->\n        <div\n            v-show=\"!isShowList\"\n            class=\"grid grid-cols-[repeat(auto-fill,minmax(240px,1fr))] mx-auto mt-6 max-w-[970px] justify-center gap-[10px] rounded-[10px] px-[5px] text-start md:grid-cols-[repeat(auto-fill,minmax(240px,300px))] md:px-[25px]\"\n        >\n            <component\n                :is=\"article.path.includes('://') ? 'a' : 'RouterLink'\"\n                v-for=\"article in currentTagAndList?.list\"\n                :key=\"article.desc\"\n                v-bind=\"\n                    article.path.includes('://')\n                        ? {\n                              href: article.path,\n                              target: '_blank',\n                              rel: 'noopener noreferrer',\n                          }\n                        : {\n                              to: article.path,\n                          }\n                \"\n                class=\"relative flex flex-col cursor-pointer justify-center overflow-hidden border-[var(--blog-card-border)] rounded-[12px] border-solid bg-[var(--blog-card-bg)] object-cover pb-1 text-[var(--blog-card-text)] shadow-md\"\n                style=\"border: 5px solid var(--blog-card-border)\"\n            >\n                <img\n                    :alt=\"article.title\"\n                    class=\"h-[200px] w-full rounded-t-md object-cover\"\n                    :src=\"\n                        article.cover\n                            ? `${article.cover}?x-oss-process=image/resize,w_640/format,webp`\n                            : 'https://cdn.jsdelivr.net/gh/pinky-pig/pic-bed/images乳胶漆刷墙.jpg'\n                    \"\n                />\n                <div\n                    class=\"w-full flex items-center justify-between px-3 pt-2 leading-tight\"\n                >\n                    <div class=\"line-clamp-1 overflow-hidden\">\n                        {{ article.title }}\n                    </div>\n                    <div class=\"text-sm\">\n                        {{ article.date }}\n                    </div>\n                </div>\n                <div\n                    class=\"line-clamp-2 h-12 w-full overflow-hidden px-3 pt-2 text-sm font-light\"\n                >\n                    {{ article.desc }}\n                </div>\n            </component>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n.reverse-card {\n    perspective-origin: 0 0;\n    overflow: hidden;\n    cursor: pointer;\n    transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);\n    -webkit-backface-visibility: hidden;\n    backface-visibility: hidden;\n}\n</style>\n"],"names":["allRoutes","useRouter","getRoutes","weeklyRoutes","otherRoutes","posts","length","parseRoute","post","fileName","path","split","pop","index","title","desc","date","tags","cover","meta","frontmatter","filter","i","startsWith","endsWith","_b","_a","map","getPostList","allPosts","computed","filterAndSortByTags","hash","window","location","currentBlogTag","value","decodeURIComponent","watchEffect","currentTagAndList","find","name","list","tagObjects","forEach","tag","push","sort","a","b","Object","keys","key","reverse","isShowList","ref","handleChangeShowMode","item"],"mappings":"8rGAIA,MAEMA,EAFSC,IAEUC,aAEnBC,aACFA,EAAAC,YACAA,GAoCJ,SAAqBC,GACjB,GAAIA,EAAMC,OAAQ,CACR,MAAAC,EAAcC,IAChB,MAAMC,EAAWD,EAAKE,KAAKC,MAAM,KAAKC,MAChCC,EAAQJ,EAASE,MAAM,KAAK,GAC5BG,EAAQ,IAAID,QAAYJ,EAASE,MAAM,KAAK,KAC5CD,EAAOF,EAAKE,MACZK,KAAEA,EAAMC,KAAAA,EAAAC,KAAMA,QAAMC,GAAUV,EAAKW,KAAKC,YAEvC,MAAA,CACHP,QACAC,QACAJ,OACAK,OACAC,OACAC,OACAC,QAAA,EAkBR,MAAO,CAAEf,aAdYE,EAChBgB,QAAQC,GAAWA,EAAEZ,KAAKa,WAAW,kBACrCF,QACIC,YAAO,OAAAA,EAAEZ,KAAKc,SAAS,WAAY,OAAAC,EAAA,OAAGC,EAAA,MAAAJ,OAAA,EAAAA,EAAAH,WAAM,EAAAO,EAAAN,kBAAa,EAAAK,EAAAT,KAAA,IAE7DW,KAAKL,GAAMf,EAAWe,KASJlB,YAPHC,EACfgB,QAAQC,GAAWA,EAAEZ,KAAKa,WAAW,gBACrCF,QACIC,YAAO,OAAAA,EAAEZ,KAAKc,SAAS,WAAY,OAAAC,EAAA,OAAGC,EAAA,MAAAJ,OAAA,EAAAA,EAAAH,WAAM,EAAAO,EAAAN,kBAAa,EAAAK,EAAAT,KAAA,IAE7DW,KAAKL,GAAMf,EAAWe,KAEQ,CAEnC,MAAO,CAAEnB,aAAc,GAAIC,YAAa,GAEhD,CAzEmDwB,CAAY5B,GAKzD6B,EAAWC,GAAS,IAAM,IACzBC,EAAoB,IAAI3B,KAAgBD,OAczC,MAAA6B,EAAOC,OAAOC,SAASF,KAC7BG,EAAeC,MAAQJ,EACjBK,mBAAmBL,GACnBG,EAAeC,OAAS,MAE9BE,GAAY,KACJH,EAAeC,QAAcH,OAAAC,SAASF,KAAOG,EAAeC,MAAA,IAGpE,MAAMG,EAAoBT,GACtB,IACID,EAASO,MAAMI,MAAMlB,GAAMA,EAAEmB,OAASN,EAAeC,SACrDP,EAASO,MAAM,KA2CvB,SAASL,EAAoBW,GACzB,MAAMC,EAEF,CAAA,EAUJ,OATKD,EAAAE,SAASpC,IACLA,EAAAS,KAAK2B,SAASC,IACXF,EAAWE,KAAiBA,GAAKC,KAAKtC,GAC1BmC,EAAAE,GAAO,CAACrC,GAEbmC,EAAAE,GAAKE,MAAK,CAACC,EAAGC,IAAMD,EAAEnC,MAAQoC,EAAEpC,OAAK,GACnD,IAGEqC,OAAOC,KAAKR,GAAYhB,KAAKyB,IAAS,CACzCX,KAAMW,EACNV,KAAMC,EAAWS,GAAKC,aAE9B,CAEM,MAAAC,EAAaC,GAAI,GACvB,SAASC,IACMF,EAAAlB,OAASkB,EAAWlB,KACnC,4iCArFA,SAAqBqB,GACjBtB,EAAeC,MAAQqB,EAAKhB,IAChC"}