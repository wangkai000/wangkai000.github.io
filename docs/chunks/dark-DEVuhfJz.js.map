{"version":3,"file":"dark-DEVuhfJz.js","sources":["../../src/composables/dark.ts"],"sourcesContent":["export const isDark = useDark();\nexport function toggleDark(event: MouseEvent) {\n    // @ts-expect-error experimental API\n    const isAppearanceTransition =\n        document.startViewTransition &&\n        !window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches;\n\n    if (!isAppearanceTransition) {\n        isDark.value = !isDark.value;\n        return;\n    }\n\n    const x = event.clientX;\n    const y = event.clientY;\n    const endRadius = Math.hypot(\n        Math.max(x, innerWidth - x),\n        Math.max(y, innerHeight - y),\n    );\n    // @ts-expect-error: Transition API\n    const transition = document.startViewTransition(async () => {\n        isDark.value = !isDark.value;\n        await nextTick();\n    });\n    transition.ready.then(() => {\n        const clipPath = [\n            `circle(0px at ${x}px ${y}px)`,\n            `circle(${endRadius}px at ${x}px ${y}px)`,\n        ];\n\n        // 也可以这样设置动画，直接将 keyframes 给 animate\n        // const keyframes = [\n        //   { clipPath: clipPath[0] }, // 初始状态\n        //   { clipPath: clipPath[1], offset: 0.5 }, // 停留在50%的时间\n        //   { clipPath: clipPath[2] } // 最终状态\n        // ];\n\n        document.documentElement.animate(\n            {\n                clipPath: isDark.value ? [...clipPath].reverse() : clipPath,\n            },\n            {\n                duration: 400,\n                easing: \"ease-out\",\n                pseudoElement: isDark.value\n                    ? \"::view-transition-old(root)\"\n                    : \"::view-transition-new(root)\",\n            },\n        );\n    });\n}\n"],"names":["isDark","useDark","toggleDark","event","document","startViewTransition","window","matchMedia","matches","value","x","clientX","y","clientY","endRadius","Math","hypot","max","innerWidth","innerHeight","async","nextTick","ready","then","clipPath","documentElement","animate","reverse","duration","easing","pseudoElement"],"mappings":"oFAAO,MAAMA,EAASC,IACf,SAASC,EAAWC,GAMvB,KAHIC,SAASC,sBACRC,OAAOC,WAAW,oCAAoCC,SAIvD,YADOR,EAAAS,OAAST,EAAOS,OAI3B,MAAMC,EAAIP,EAAMQ,QACVC,EAAIT,EAAMU,QACVC,EAAYC,KAAKC,MACnBD,KAAKE,IAAIP,EAAGQ,WAAaR,GACzBK,KAAKE,IAAIL,EAAGO,YAAcP,IAGXR,SAASC,qBAAoBe,UACrCpB,EAAAS,OAAST,EAAOS,YACjBY,GAAS,IAERC,MAAMC,MAAK,KAClB,MAAMC,EAAW,CACb,iBAAiBd,OAAOE,OACxB,UAAUE,UAAkBJ,OAAOE,QAUvCR,SAASqB,gBAAgBC,QACrB,CACIF,SAAUxB,EAAOS,MAAQ,IAAIe,GAAUG,UAAYH,GAEvD,CACII,SAAU,IACVC,OAAQ,WACRC,cAAe9B,EAAOS,MAChB,8BACA,+BACV,GAGZ"}