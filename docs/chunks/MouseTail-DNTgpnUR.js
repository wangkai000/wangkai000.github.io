import{U as e}from"./ShadowCard-BZyvnWa8.js";import{d as t,s as n,y as r,o as l,c as u,A as s,f as o,e as i,F as a,z as c,r as p,g as h,w as f,b as v,B as g}from"../assets/app-BqS4ReQG.js";function d(e,t,n,r=e=>e){return e*r(.5-t*(.5-n))}function m(e,t){return[e[0]+t[0],e[1]+t[1]]}function w(e,t){return[e[0]-t[0],e[1]-t[1]]}function M(e,t){return[e[0]*t,e[1]*t]}function y(e){return[e[1],-e[0]]}function x(e,t){return e[0]*t[0]+e[1]*t[1]}function C(e,t){return e[0]===t[0]&&e[1]===t[1]}function b(e,t){return function(e){return e[0]*e[0]+e[1]*e[1]}(w(e,t))}function k(e){return function(e,t){return[e[0]/t,e[1]/t]}(e,function(e){return Math.hypot(e[0],e[1])}(e))}function P(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function _(e,t,n){let r=Math.sin(n),l=Math.cos(n),u=e[0]-t[0],s=e[1]-t[1],o=u*r+s*l;return[u*l-s*r+t[0],o+t[1]]}function z(e,t,n){return m(e,M(w(t,e),n))}function A(e,t,n){return m(e,M(t,n))}var{min:F,PI:L}=Math,j=.275,D=L+1e-4;function I(e,t={}){return function(e,t={}){let{size:n=16,smoothing:r=.5,thinning:l=.5,simulatePressure:u=!0,easing:s=e=>e,start:o={},end:i={},last:a=!1}=t,{cap:c=!0,easing:p=e=>e*(2-e)}=o,{cap:h=!0,easing:f=e=>--e*e*e+1}=i;if(0===e.length||n<=0)return[];let v,g=e[e.length-1].runningLength,C=!1===o.taper?0:!0===o.taper?Math.max(n,g):o.taper,P=!1===i.taper?0:!0===i.taper?Math.max(n,g):i.taper,L=Math.pow(n*r,2),I=[],X=[],Y=e.slice(0,10).reduce(((e,t)=>{let r=t.pressure;if(u){let l=F(1,t.distance/n),u=F(1,1-l);r=F(1,e+l*j*(u-e))}return(e+r)/2}),e[0].pressure),Z=d(n,l,e[e.length-1].pressure,s),q=e[0].vector,B=e[0].point,E=B,Q=B,S=E,T=!1;for(let k=0;k<e.length;k++){let{pressure:t}=e[k],{point:r,vector:o,distance:i,runningLength:a}=e[k];if(k<e.length-1&&g-a<3)continue;if(l){if(u){let e=F(1,i/n),r=F(1,1-e);t=F(1,Y+e*j*(r-Y))}Z=d(n,l,t,s)}else Z=n/2;void 0===v&&(v=Z);let c=a<C?p(a/C):1,h=g-a<P?f((g-a)/P):1;Z=Math.max(.01,Z*Math.min(c,h));let A=(k<e.length-1?e[k+1]:e[k]).vector,U=k<e.length-1?x(o,A):1,G=null!==U&&U<0;if(x(o,q)<0&&!T||G){let e=M(y(q),Z);for(let t=1/13,n=0;n<=1;n+=t)Q=_(w(r,e),r,D*n),I.push(Q),S=_(m(r,e),r,D*-n),X.push(S);B=Q,E=S,G&&(T=!0);continue}if(T=!1,k===e.length-1){let e=M(y(o),Z);I.push(w(r,e)),X.push(m(r,e));continue}let H=M(y(z(A,o,U)),Z);Q=w(r,H),(k<=1||b(B,Q)>L)&&(I.push(Q),B=Q),S=m(r,H),(k<=1||b(E,S)>L)&&(X.push(S),E=S),Y=t,q=o}let U=e[0].point.slice(0,2),G=e.length>1?e[e.length-1].point.slice(0,2):m(e[0].point,[1,1]),H=[],J=[];if(1===e.length){if(!C&&!P||a){let e=A(U,k(y(w(U,G))),-(v||Z)),t=[];for(let n=1/13,r=n;r<=1;r+=n)t.push(_(e,U,2*D*r));return t}}else{if(!(C||P&&1===e.length))if(c)for(let e=1/13,n=e;n<=1;n+=e){let e=_(X[0],U,D*n);H.push(e)}else{let e=w(I[0],X[0]),t=M(e,.5),n=M(e,.51);H.push(w(U,t),w(U,n),m(U,n),m(U,t))}let t=y(function(e){return[-e[0],-e[1]]}(e[e.length-1].vector));if(P||C&&1===e.length)J.push(G);else if(h){let e=A(G,t,Z);for(let t=1/29,n=t;n<1;n+=t)J.push(_(e,G,3*D*n))}else J.push(m(G,M(t,Z)),m(G,M(t,.99*Z)),w(G,M(t,.99*Z)),w(G,M(t,Z)))}return I.concat(J,X.reverse(),H)}(function(e,t={}){var n;let{streamline:r=.5,size:l=16,last:u=!1}=t;if(0===e.length)return[];let s=.15+.85*(1-r),o=Array.isArray(e[0])?e:e.map((({x:e,y:t,pressure:n=.5})=>[e,t,n]));if(2===o.length){let e=o[1];o=o.slice(0,-1);for(let t=1;t<5;t++)o.push(z(o[0],e,t/4))}1===o.length&&(o=[...o,[...m(o[0],[1,1]),...o[0].slice(2)]]);let i=[{point:[o[0][0],o[0][1]],pressure:o[0][2]>=0?o[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],a=!1,c=0,p=i[0],h=o.length-1;for(let f=1;f<o.length;f++){let e=u&&f===h?o[f].slice(0,2):z(p.point,o[f],s);if(C(p.point,e))continue;let t=P(e,p.point);if(c+=t,f<h&&!a){if(c<l)continue;a=!0}p={point:e,pressure:o[f][2]>=0?o[f][2]:.5,vector:k(w(p.point,e)),distance:t,runningLength:c},i.push(p)}return i[0].vector=(null==(n=i[1])?void 0:n.vector)||[0,0],i}(e,t),t)}const X={class:"relative h-60vh w-full"},Y=["d"],Z=["d","stroke","fill"],q=t({__name:"FreeDraw",setup(e){const t=n(!0),p={size:16,smoothing:.5,thinning:.5,streamline:.5,easing:e=>e,start:{taper:0,cap:!0},end:{taper:0,cap:!0}},h={size:18,start:{taper:!0}},f=n("#000000");const v=n(!1);const g=n([]),d=n(""),m=n([]);async function w(e){var t;e.target.setPointerCapture(e.pointerId),await async function(){f.value="#000000"}(),await async function(){v.value=!1}(),g.value=[[e.clientX,e.clientY,null!=(t=e.pressure)?t:.5]],v.value||b()}function M(e){1===e.buttons&&t.value&&(g.value=[...g.value,[e.offsetX,e.offsetY,e.pressure]])}r((()=>g.value),(()=>{const e=v.value?p:h,t=I(g.value,e);d.value=function(e){if(!e.length)return"";const t=e.reduce(((e,[t,n],r,l)=>{const[u,s]=l[(r+1)%l.length];return e.push(t,n,(t+u)/2,(n+s)/2),e}),["M",...e[0],"Q"]);return t.push("Z"),t.join(" ")}(t)}),{deep:!0}),r(t,(e=>{d.value="",g.value=[],m.value=[]}));let y=0,x=0;function C(e){cancelAnimationFrame(x),v.value&&m.value.push({path:d.value,color:f.value}),d.value=""}function b(){const e=Date.now();e-y>32&&g.value.length>1&&(g.value.splice(0,Math.ceil(.1*g.value.length)),y=e),x=requestAnimationFrame(b)}return(e,n)=>(l(),u("div",X,[(l(),u("svg",{class:"absolute left-0 top-0 h-full w-full touch-none border-[5px] border-[var(--modal-border)] border-solid",style:s({pointerEvents:o(t)?"auto":"none"}),onPointerdown:w,onPointermove:M,onPointerup:C},[i("path",{d:o(d),stroke:"currentColor",fill:"currentColor"},null,8,Y),(l(!0),u(a,null,c(o(m),((e,t)=>(l(),u("path",{key:t,d:e.path,stroke:e.color,fill:e.color},null,8,Z)))),128))],36))]))}}),B=[i("svg",{class:"pointer-events-auto scale-150 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor"},[i("path",{fill:"currentColor",d:"M1.981 12.472c-.143.222.115.529.351.413.815-.4 1.604-.823 2.375-1.288.227-.137.476.108.329.328-1.904 2.857-6.632 9.873-1.427 10.333 3.16.279 6.33-2.296 9.304-4.985.219-.197.525.062.361.307-2.42 3.634-6.859 11.056-1.025 11.41 5.074.308 3.904-4.392 15.43-10.738.838-.46 1.102-1.412.892-2.34-.372-1.994-4.135-1.962-6.224-1.414-.255.067-.5-.253-.329-.453 2.546-2.986 9.853-10.44 5.252-12.768C23.219-.77 13.918 8.898 9.965 12.541c-.208.191-.435-.022-.267-.25 1.944-2.638 4.488-5.56 4.945-8.597a1.807 1.807 0 0 0-.238-1.214 2.057 2.057 0 0 0-.971-.854C9.124-.284 4.203 9.028 1.98 12.472Z"})],-1)],E=t({__name:"MouseTail",setup(t){const r=n(!1);return(t,n)=>{const u=q,s=p("client-only"),a=e;return l(),h(a,{class:"!p-[5px]"},{default:f((()=>[i("div",{class:"grid h-full w-full place-items-center text-[--text-color]",onClick:n[0]||(n[0]=e=>r.value=!0)},B),v(s,null,{default:f((()=>[o(r)?(l(),h(u,{key:0})):g("",!0)])),_:1})])),_:1})}}});export{E as default};
