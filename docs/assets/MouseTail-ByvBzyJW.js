import{U as _t}from"./ShadowCard-B_Tm9U9q.js";import{d as ht,s as B,y as lt,o as V,c as Q,A as wt,f as T,e as W,F as yt,z as Ct,r as xt,g as st,w as it,b as Mt,C as kt}from"./app-DPZYlvB4.js";function at(t,e,l,v=h=>h){return t*v(.5-e*(.5-l))}function Pt(t){return[-t[0],-t[1]]}function k(t,e){return[t[0]+e[0],t[1]+e[1]]}function y(t,e){return[t[0]-e[0],t[1]-e[1]]}function M(t,e){return[t[0]*e,t[1]*e]}function bt(t,e){return[t[0]/e,t[1]/e]}function I(t){return[t[1],-t[0]]}function ut(t,e){return t[0]*e[0]+t[1]*e[1]}function Dt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ft(t){return Math.hypot(t[0],t[1])}function zt(t){return t[0]*t[0]+t[1]*t[1]}function ct(t,e){return zt(y(t,e))}function dt(t){return bt(t,Ft(t))}function St(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function X(t,e,l){let v=Math.sin(l),h=Math.cos(l),_=t[0]-e[0],C=t[1]-e[1],n=_*h-C*v,d=_*v+C*h;return[n+e[0],d+e[1]]}function et(t,e,l){return k(t,M(y(e,t),l))}function pt(t,e,l){return k(t,M(e,l))}var{min:U,PI:At}=Math,ft=.275,Y=At+1e-4;function Lt(t,e={}){let{size:l=16,smoothing:v=.5,thinning:h=.5,simulatePressure:_=!0,easing:C=r=>r,start:n={},end:d={},last:g=!1}=e,{cap:x=!0,easing:w=r=>r*(2-r)}=n,{cap:$=!0,easing:p=r=>--r*r*r+1}=d;if(t.length===0||l<=0)return[];let a=t[t.length-1].runningLength,m=n.taper===!1?0:n.taper===!0?Math.max(l,a):n.taper,A=d.taper===!1?0:d.taper===!0?Math.max(l,a):d.taper,Z=Math.pow(l*v,2),o=[],f=[],P=t.slice(0,10).reduce((r,c)=>{let s=c.pressure;if(_){let i=U(1,c.distance/l),K=U(1,1-i);s=U(1,r+(K-r)*(i*ft))}return(r+s)/2},t[0].pressure),u=at(l,h,t[t.length-1].pressure,C),E,j=t[0].vector,D=t[0].point,N=D,b=D,L=N,G=!1;for(let r=0;r<t.length;r++){let{pressure:c}=t[r],{point:s,vector:i,distance:K,runningLength:q}=t[r];if(r<t.length-1&&a-q<3)continue;if(h){if(_){let S=U(1,K/l),tt=U(1,1-S);c=U(1,P+(tt-P)*(S*ft))}u=at(l,h,c,C)}else u=l/2;E===void 0&&(E=u);let gt=q<m?w(q/m):1,vt=a-q<A?p((a-q)/A):1;u=Math.max(.01,u*Math.min(gt,vt));let nt=(r<t.length-1?t[r+1]:t[r]).vector,R=r<t.length-1?ut(i,nt):1,mt=ut(i,j)<0&&!G,rt=R!==null&&R<0;if(mt||rt){let S=M(I(j),u);for(let tt=1/13,O=0;O<=1;O+=tt)b=X(y(s,S),s,Y*O),o.push(b),L=X(k(s,S),s,Y*-O),f.push(L);D=b,N=L,rt&&(G=!0);continue}if(G=!1,r===t.length-1){let S=M(I(i),u);o.push(y(s,S)),f.push(k(s,S));continue}let ot=M(I(et(nt,i,R)),u);b=y(s,ot),(r<=1||ct(D,b)>Z)&&(o.push(b),D=b),L=k(s,ot),(r<=1||ct(N,L)>Z)&&(f.push(L),N=L),P=c,j=i}let F=t[0].point.slice(0,2),z=t.length>1?t[t.length-1].point.slice(0,2):k(t[0].point,[1,1]),J=[],H=[];if(t.length===1){if(!(m||A)||g){let r=pt(F,dt(I(y(F,z))),-(E||u)),c=[];for(let s=1/13,i=s;i<=1;i+=s)c.push(X(r,F,Y*2*i));return c}}else{if(!(m||A&&t.length===1))if(x)for(let c=1/13,s=c;s<=1;s+=c){let i=X(f[0],F,Y*s);J.push(i)}else{let c=y(o[0],f[0]),s=M(c,.5),i=M(c,.51);J.push(y(F,s),y(F,i),k(F,i),k(F,s))}let r=I(Pt(t[t.length-1].vector));if(A||m&&t.length===1)H.push(z);else if($){let c=pt(z,r,u);for(let s=1/29,i=s;i<1;i+=s)H.push(X(c,z,Y*3*i))}else H.push(k(z,M(r,u)),k(z,M(r,u*.99)),y(z,M(r,u*.99)),y(z,M(r,u)))}return o.concat(H,f.reverse(),J)}function Bt(t,e={}){var l;let{streamline:v=.5,size:h=16,last:_=!1}=e;if(t.length===0)return[];let C=.15+(1-v)*.85,n=Array.isArray(t[0])?t:t.map(({x:p,y:a,pressure:m=.5})=>[p,a,m]);if(n.length===2){let p=n[1];n=n.slice(0,-1);for(let a=1;a<5;a++)n.push(et(n[0],p,a/4))}n.length===1&&(n=[...n,[...k(n[0],[1,1]),...n[0].slice(2)]]);let d=[{point:[n[0][0],n[0][1]],pressure:n[0][2]>=0?n[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],g=!1,x=0,w=d[0],$=n.length-1;for(let p=1;p<n.length;p++){let a=_&&p===$?n[p].slice(0,2):et(w.point,n[p],C);if(Dt(w.point,a))continue;let m=St(a,w.point);if(x+=m,p<$&&!g){if(x<h)continue;g=!0}w={point:a,pressure:n[p][2]>=0?n[p][2]:.5,vector:dt(y(w.point,a)),distance:m,runningLength:x},d.push(w)}return d[0].vector=((l=d[1])==null?void 0:l.vector)||[0,0],d}function $t(t,e={}){return Lt(Bt(t,e),e)}const Et={class:"relative h-60vh w-full"},Nt=["d"],Ut=["d","stroke","fill"],Vt=ht({__name:"FreeDraw",setup(t){function e(o){if(!o.length)return"";const f=o.reduce((P,[u,E],j,D)=>{const[N,b]=D[(j+1)%D.length];return P.push(u,E,(u+N)/2,(E+b)/2),P},["M",...o[0],"Q"]);return f.push("Z"),f.join(" ")}const l=B(!0),v={size:16,smoothing:.5,thinning:.5,streamline:.5,easing:o=>o,start:{taper:0,cap:!0},end:{taper:0,cap:!0}},h={size:18,start:{taper:!0}},_=B("#000000");async function C(o){_.value="#000000"}const n=B(!1);async function d(o){n.value=!1}const g=B([]),x=B(""),w=B([]);lt(()=>g.value,()=>{const o=n.value?v:h,f=$t(g.value,o);x.value=e(f)},{deep:!0}),lt(l,o=>{x.value="",g.value=[],w.value=[]});async function $(o){var f;o.target.setPointerCapture(o.pointerId),await C(),await d(),g.value=[[o.clientX,o.clientY,(f=o.pressure)!=null?f:.5]],n.value||Z()}function p(o){o.buttons===1&&l.value&&(g.value=[...g.value,[o.offsetX,o.offsetY,o.pressure]])}let a=0,m=0;function A(o){cancelAnimationFrame(m),n.value&&w.value.push({path:x.value,color:_.value}),x.value=""}function Z(){const o=Date.now();o-a>32&&g.value.length>1&&(g.value.splice(0,Math.ceil(g.value.length*.1)),a=o),m=requestAnimationFrame(Z)}return(o,f)=>(V(),Q("div",Et,[(V(),Q("svg",{class:"absolute left-0 top-0 h-full w-full touch-none border-[5px] border-[var(--modal-border)] border-solid",style:wt({pointerEvents:T(l)?"auto":"none"}),onPointerdown:$,onPointermove:p,onPointerup:A},[W("path",{d:T(x),stroke:"currentColor",fill:"currentColor"},null,8,Nt),(V(!0),Q(yt,null,Ct(T(w),(P,u)=>(V(),Q("path",{key:u,d:P.path,stroke:P.color,fill:P.color},null,8,Ut))),128))],36))]))}}),Zt=W("svg",{class:"pointer-events-auto scale-150 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor"},[W("path",{fill:"currentColor",d:"M1.981 12.472c-.143.222.115.529.351.413.815-.4 1.604-.823 2.375-1.288.227-.137.476.108.329.328-1.904 2.857-6.632 9.873-1.427 10.333 3.16.279 6.33-2.296 9.304-4.985.219-.197.525.062.361.307-2.42 3.634-6.859 11.056-1.025 11.41 5.074.308 3.904-4.392 15.43-10.738.838-.46 1.102-1.412.892-2.34-.372-1.994-4.135-1.962-6.224-1.414-.255.067-.5-.253-.329-.453 2.546-2.986 9.853-10.44 5.252-12.768C23.219-.77 13.918 8.898 9.965 12.541c-.208.191-.435-.022-.267-.25 1.944-2.638 4.488-5.56 4.945-8.597a1.807 1.807 0 0 0-.238-1.214 2.057 2.057 0 0 0-.971-.854C9.124-.284 4.203 9.028 1.98 12.472Z"})],-1),jt=[Zt],Xt=ht({__name:"MouseTail",setup(t){const e=B(!1);return(l,v)=>{const h=Vt,_=xt("client-only"),C=_t;return V(),st(C,{class:"!p-[5px]"},{default:it(()=>[W("div",{class:"grid h-full w-full place-items-center text-[--text-color]",onClick:v[0]||(v[0]=n=>e.value=!0)},jt),Mt(_,null,{default:it(()=>[T(e)?(V(),st(h,{key:0})):kt("",!0)]),_:1})]),_:1})}}});export{Xt as default};
